apiVersion: apps/v1
kind: Deployment
metadata:
  name: faxoverip
  labels:
    running: faxoverip
spec:
  replicas: 1
  selector:
    matchLabels:
      app: faxoverip
  template:
    metadata:
      labels:
        app: faxoverip
    spec:
      hostIPC: true # Use the host's ipc namespace https://www.man7.org/linux/man-pages/man7/ipc_namespaces.7.html
      hostNetwork: true # Use the host's network namespace https://www.man7.org/linux/man-pages/man7/network_namespaces.7.html
      hostPID: true # Use the host's pid namespace https://man7.org/linux/man-pages/man7/pid_namespaces.7.html
      containers:
      - name: faxoverip
        image: pablitomilenios/fax-foip-fritzbox:2vpns
        securityContext:
          privileged: true
          allowPrivilegeEscalation: true
          capabilities:
            add:
            - NET_ADMIN # add the capabilities you need https://man7.org/linux/man-pages/man7/capabilities.7.html
            - SYS_ADMIN
            - SYS_MODULE
          runAsUser: 0
        ports:
        - containerPort: 500
        - containerPort: 3000
        - containerPort: 4500
        - containerPort: 5060       
        - containerPort: 5061
        - containerPort: 6060
        - containerPort: 10000